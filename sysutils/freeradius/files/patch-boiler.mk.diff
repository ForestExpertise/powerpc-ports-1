--- scripts/boiler.mk	2020-03-24 22:55:09.000000000 +0800
+++ scripts/boiler.mk	2025-08-09 09:58:58.000000000 +0800
@@ -38,6 +38,8 @@
     Q=
 endif
 
+SED = gsed
+
 # ADD_CLEAN_RULE - Parameterized "function" that adds a new rule and phony
 #   target for cleaning the specified target (removing its build-generated
 #   files).
@@ -90,7 +92,7 @@
 define FILTER_DEPENDS
 	$(Q)mkdir -p $$(dir $${BUILD_DIR}/make/src/$$*)
 	$(Q)mkdir -p $$(dir $${BUILD_DIR}/objs/$$*)
-	$(Q)sed  -e 's/#.*//' \
+	$(Q)$(SED)  -e 's/#.*//' \
 	  -e 's,^$${top_srcdir},$$$${top_srcdir},' \
 	  -e 's, $${top_srcdir}, $$$${top_srcdir},' \
 	  -e 's,^$${BUILD_DIR},$$$${BUILD_DIR},' \
@@ -101,9 +103,9 @@
 	  -e '/: </ d' \
 	  -e 's/\.o: /.$$$${OBJ_EXT}: /' \
 	  -e '/^ *\\$$$$/ d' \
-	  < $${BUILD_DIR}/objs/$$*.d | sed -e '$$$$!N; /^\(.*\)\n\1$$$$/!P; D' \
+	  < $${BUILD_DIR}/objs/$$*.d | $(SED) -e '$$$$!N; /^\(.*\)\n\1$$$$/!P; D' \
 	  >  $${BUILD_DIR}/make/src/$$*.mk
-	$(Q)sed -e 's/#.*//' \
+	$(Q)$(SED) -e 's/#.*//' \
 	  -e 's, $${BUILD_DIR}/make/include/[^ :]*,,' \
 	  -e 's, /[^: ]*,,g' \
 	  -e 's,^ *[^:]* *: *$$$$,,' \
@@ -111,7 +113,7 @@
 	  -e 's/^[^:]*: *//' \
 	  -e 's/ *\\$$$$//' \
 	  -e 's/$$$$/ :/' \
-	  < $${BUILD_DIR}/objs/$$*.d | sed -e '$$$$!N; /^\(.*\)\n\1$$$$/!P; D' \
+	  < $${BUILD_DIR}/objs/$$*.d | $(SED) -e '$$$$!N; /^\(.*\)\n\1$$$$/!P; D' \
 	 >> $${BUILD_DIR}/make/src/$$*.mk
 	 @rm -f $${BUILD_DIR}/objs/$$*.d
 endef
@@ -130,7 +132,7 @@
 define ADD_OBJECT_RULE
 $${BUILD_DIR}/objs/%.${OBJ_EXT} $${BUILD_DIR}/objs/%.d: ${1} | ${BOOTSTRAP_BUILD}
 	${2}
-	$${CPP} $${CPPFLAGS} $$(addprefix -I,$${SRC_INCDIRS}) $${SRC_DEFS} $$< | sed \
+	$${CPP} $${CPPFLAGS} $$(addprefix -I,$${SRC_INCDIRS}) $${SRC_DEFS} $$< | $(SED) \
 	  -n 's,^\# *[0-9][0-9]* *"\([^"]*\)".*,$$@: \1,p' > $${BUILD_DIR}/objs/$$*.d
 ${FILTER_DEPENDS}
 endef
