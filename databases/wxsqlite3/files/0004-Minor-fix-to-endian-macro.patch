From 922052f895e4c837b4332bd93c406e9e38c93d18 Mon Sep 17 00:00:00 2001
From: Sergey Fedorov <barracuda@macos-powerpc.org>
Date: Mon, 2 Jun 2025 12:23:00 +0800
Subject: [PATCH 4/5] Minor fix to endian macro

---
 src/sqlite3mc_amalgamation.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git src/sqlite3mc_amalgamation.c src/sqlite3mc_amalgamation.c
index ce00f9e4..b58d0c03 100644
--- src/sqlite3mc_amalgamation.c
+++ src/sqlite3mc_amalgamation.c
@@ -279215,7 +279215,7 @@ void sqlcipher_hmac(int algorithm,
 
 static inline void write32_be(uint32_t n, uint8_t out[4])
 {
-#if defined(__GNUC__) && __GNUC__ >= 4 && __BYTE_ORDER == __LITTLE_ENDIAN
+#if defined(__GNUC__) && __GNUC__ >= 4 && SQLITE_BYTEORDER == 1234
   *(uint32_t *)(out) = __builtin_bswap32(n);
 #else
   out[0] = (n >> 24) & 0xff;
@@ -279227,7 +279227,7 @@ static inline void write32_be(uint32_t n, uint8_t out[4])
 
 static inline void write64_be(uint64_t n, uint8_t out[8])
 {
-#if defined(__GNUC__) &&  __GNUC__ >= 4 && __BYTE_ORDER == __LITTLE_ENDIAN
+#if defined(__GNUC__) &&  __GNUC__ >= 4 && SQLITE_BYTEORDER == 1234
   *(uint64_t *)(out) = __builtin_bswap64(n);
 #else
   write32_be((n >> 32) & 0xffffffff, out);
-- 
2.48.0

